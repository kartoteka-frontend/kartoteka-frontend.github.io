var N=Object.defineProperty,U=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var b=(e,o,t)=>o in e?N(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,D=(e,o)=>{for(var t in o||(o={}))G.call(o,t)&&b(e,t,o[t]);if(E)for(var t of E(o))j.call(o,t)&&b(e,t,o[t]);return e},P=(e,o)=>U(e,F(o));import{o as u,c as d,a as h,b as k,w as T,u as w,R as y,d as A,e as B,F as p,f,r as I,n as V,g as L,v as O,t as S,h as H,i as q,j as a,k as K,l as M,m as W}from"./vendor.db9d2b8c.js";const z=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}};z();const J={key:0,class:"layout"},Q=h("h1",null,"Kartot\xE9ka",-1),X=f("Domov"),Y=f("Dokumenty"),Z=f("Postup"),x=f("Skupiny"),ee=f("Profil"),te={computed:{page(){return this.$route.name}},methods:{logout(){window.localStorage.clear(),this.$router.push({name:"login"})}}},oe=Object.assign(te,{setup(e){return(o,t)=>(u(),d(p,null,[o.page!=="login"?(u(),d("div",J,[h("header",null,[Q,h("div",{class:"logout",onClick:t[0]||(t[0]=(...n)=>o.logout&&o.logout(...n))}," Odhl\xE1si\u0165 ")]),h("nav",null,[k(w(y),{to:"/"},{default:T(()=>[X]),_:1}),k(w(y),{to:"/document"},{default:T(()=>[Y]),_:1}),k(w(y),{to:"/progress"},{default:T(()=>[Z]),_:1}),k(w(y),{to:"/group"},{default:T(()=>[x]),_:1}),k(w(y),{to:"/profile"},{default:T(()=>[ee]),_:1})])])):A("",!0),k(w(B))],64))}}),re="modulepreload",C={},ne="/",m=function(o,t){return!t||t.length===0?o():Promise.all(t.map(n=>{if(n=`${ne}${n}`,n in C)return;C[n]=!0;const r=n.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const l=document.createElement("link");if(l.rel=r?"stylesheet":re,r||(l.as="script",l.crossOrigin=""),l.href=n,document.head.appendChild(l),r)return new Promise((c,g)=>{l.addEventListener("load",c),l.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>o())};var R=(e,o)=>{const t=e.__vccOpts||e;for(const[n,r]of o)t[n]=r;return t};const ae={name:"Table",props:{data:Array,header:Object,onClick:Function},data(){return{filter:{}}},computed:{filterData(){let e=this.data;for(name in this.filter)this.filter[name]&&(e=e.filter(o=>o[name].toLowerCase().includes(this.filter[name].toLowerCase())));return e}},methods:{styleFilter(e){return{width:"calc("+e+"% - 20px)"}},styleColumn(e,o){return{width:e+"%","text-align":o}}}},se={class:"filter"},le=["placeholder","onUpdate:modelValue"],ie=["onClick"],ue=["onUpdate:modelValue"];function de(e,o,t,n,r,i){return u(),d(p,null,[h("div",se,[(u(!0),d(p,null,I(t.header,(l,c)=>(u(),d("div",{class:"filterItem",style:V(i.styleFilter(l.width))},[l!=null&&l.noFilter?A("",!0):L((u(),d("input",{key:0,type:"text",placeholder:l.label,"onUpdate:modelValue":g=>r.filter[c]=g},null,8,le)),[[O,r.filter[c]]])],4))),256))]),h("table",null,[h("tr",null,[(u(!0),d(p,null,I(t.header,l=>(u(),d("th",null,S(l.label),1))),256))]),(u(!0),d(p,null,I(i.filterData,l=>(u(),d("tr",{onClick:c=>t.onClick(l._id,l,c)},[(u(!0),d(p,null,I(t.header,(c,g)=>(u(),d("td",{style:V(i.styleColumn(c.width,c.align))},[c.type=="check"?(u(),d(p,{key:0},[f(S(l[g]?"\xC1no":"Nie"),1)],64)):A("",!0),c.type=="date"?L((u(),d("input",{key:1,type:"date","onUpdate:modelValue":$=>l[g]=$},null,8,ue)),[[O,l[g]]]):A("",!0),c.type?A("",!0):(u(),d(p,{key:2},[f(S(l[g]),1)],64))],4))),256))],8,ie))),256))])],64)}var ce=R(ae,[["render",de],["__scopeId","data-v-361b79b8"]]);const me={name:"HomeView",components:{Table:ce},data(){return{documents:[],header:{progress:{label:"Postup (%)",width:10,align:"center",noFilter:!0},name:{label:"Dokument",width:25},author:{label:"Autor",width:25},group:{label:"Skupina",width:20},date_to:{label:"D\xE1tum do",width:20}}}},methods:{async getUserAssignments(){try{const e=await this.$api.getUserAssignments();console.log(e.data);const o=e.data.map(t=>P(D({},t),{date_to:new Date(t.date_to).toISOString().slice(0,10)}));this.documents=o}catch(e){console.log(e)}},openDocument(e){this.$router.push({name:"documentId",params:{id:e}})}},created(){this.getUserAssignments()}},he={class:"main home"},ge=h("h1",null,"Vitaj v kartot\xE9ke!",-1);function pe(e,o,t,n,r,i){const l=H("Table");return u(),d("div",he,[ge,h("h2",null,S(r.documents.length?"Priraden\xE9 dokumenty":"Moment\xE1lne nem\xE1\u0161 priraden\xE9 \u017Eiadne nov\xE9 dokumenty"),1),r.documents.length?(u(),q(l,{key:0,header:r.header,data:r.documents,onClick:i.openDocument},null,8,["header","data","onClick"])):A("",!0)])}var _e=R(me,[["render",pe]]);const s="https://kartoteka-backend.herokuapp.com/api",_={login(e,o){return a.post(s+"/login",{email:e,password:o})},register(e,o,t){return a.post(s+"/register",{email:e,password:o,name:t})},verify(e){return a.post(s+"/verify",{token:e})},getProfile(){return a(s+"/profile",{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},updateProfile(e){return a(s+"/profile",{method:"put",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")},data:e})},getUsers(){return a(s+"/profile/all",{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},getDocuments(){return a(s+"/document",{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},getDocument(e){return a(s+"/document/"+e,{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},getDocumentEdit(e){return a(s+"/document/edit/"+e,{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},updateDocument(e){return a(s+"/document",{method:"put",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")},data:e})},createDocument(e){return a(s+"/document",{method:"post",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")},data:e})},deleteDocument(e){return a(s+"/document/"+e,{method:"delete",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},getProgress(e){return a(s+"/progress/"+e,{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},updateProgress(e){return a(s+"/progress",{method:"put",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")},data:e})},createProgress(e){return a(s+"/progress",{method:"post",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")},data:e})},getDocumentsProgress(){return a(s+"/document/progress",{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},getNote(e){return a(s+"/note/"+e,{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},updateNote(e){return a(s+"/note",{method:"put",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")},data:e})},createNote(e){return a(s+"/note",{method:"post",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")},data:e})},getGroups(){return a(s+"/group",{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},getGroup(e){return a(s+"/group/"+e,{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},getGroupEdit(e){return a(s+"/group/edit/"+e,{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},updateGroup(e){return a(s+"/group",{method:"put",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")},data:e})},createGroup(e){return a(s+"/group",{method:"post",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")},data:e})},deleteGroup(e){return a(s+"/group/"+e,{method:"delete",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},getAssignments(e){return a(s+"/assignment/"+e,{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},updateAssignments(e){return a(s+"/assignment",{method:"post",headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")},data:e})},getUserAssignments(){return a(s+"/assignment/user",{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})},getAssignmentProgress(e){return a(s+"/assignment/progress/"+e,{headers:{"Auth-Token":window.localStorage.getItem("Auth-Token")}})}},fe=K({history:M("/"),routes:[{path:"/",name:"home",component:_e,beforeEnter:async(e,o,t)=>{const n=window.localStorage.getItem("Auth-Token");if(!n)t({name:"login"});else try{await _.verify(n),t()}catch{t({name:"login"})}}},{path:"/login",name:"login",component:()=>m(()=>import("./LoginView.7b356311.js"),["assets/LoginView.7b356311.js","assets/LoginView.92476e6b.css","assets/ErrorMsg.e4a4145b.js","assets/ErrorMsg.9d583838.css","assets/vendor.db9d2b8c.js"])},{path:"/profile",name:"profile",component:()=>m(()=>import("./ProfileView.90ea1caf.js"),["assets/ProfileView.90ea1caf.js","assets/ProfileView.2452f7fd.css","assets/ErrorMsg.e4a4145b.js","assets/ErrorMsg.9d583838.css","assets/vendor.db9d2b8c.js"]),beforeEnter:async(e,o,t)=>{const n=window.localStorage.getItem("Auth-Token");if(!n)t({name:"login"});else try{await _.verify(n),t()}catch{t({name:"login"})}}},{path:"/document",name:"document",component:()=>m(()=>import("./DocumentView.9e416697.js"),["assets/DocumentView.9e416697.js","assets/DocumentView.7ac2c99c.css","assets/vendor.db9d2b8c.js"]),beforeEnter:async(e,o,t)=>{const n=window.localStorage.getItem("Auth-Token");if(!n)t({name:"login"});else try{await _.verify(n),t()}catch{t({name:"login"})}},children:[{path:":id",name:"documentId",component:()=>m(()=>import("./DocumentView.9e416697.js"),["assets/DocumentView.9e416697.js","assets/DocumentView.7ac2c99c.css","assets/vendor.db9d2b8c.js"])}]},{path:"/group",name:"group",component:()=>m(()=>import("./GroupView.f5169660.js"),["assets/GroupView.f5169660.js","assets/GroupView.19b195e9.css","assets/vendor.db9d2b8c.js"]),beforeEnter:async(e,o,t)=>{const n=window.localStorage.getItem("Auth-Token");if(!n)t({name:"login"});else try{await _.verify(n),t()}catch{t({name:"login"})}},children:[{path:":id",name:"groupId",component:()=>m(()=>import("./GroupView.f5169660.js"),["assets/GroupView.f5169660.js","assets/GroupView.19b195e9.css","assets/vendor.db9d2b8c.js"])}]},{path:"/progress",name:"progress",component:()=>m(()=>import("./ProgressView.3aaade1e.js"),["assets/ProgressView.3aaade1e.js","assets/vendor.db9d2b8c.js"]),beforeEnter:async(e,o,t)=>{const n=window.localStorage.getItem("Auth-Token");if(!n)t({name:"login"});else try{await _.verify(n),t()}catch{t({name:"login"})}},children:[{path:":id",name:"progressId",component:()=>m(()=>import("./ProgressView.3aaade1e.js"),["assets/ProgressView.3aaade1e.js","assets/vendor.db9d2b8c.js"])}]},{path:"/profile",name:"profile",component:()=>m(()=>import("./ProfileView.90ea1caf.js"),["assets/ProfileView.90ea1caf.js","assets/ProfileView.2452f7fd.css","assets/ErrorMsg.e4a4145b.js","assets/ErrorMsg.9d583838.css","assets/vendor.db9d2b8c.js"]),beforeEnter:async(e,o,t)=>{const n=window.localStorage.getItem("Auth-Token");if(!n)t({name:"login"});else try{await _.verify(n),t()}catch{t({name:"login"})}}}]}),v=W(oe);v.use(fe);v.config.globalProperties.$api=_;v.mount("#app");export{ce as T,R as _};
