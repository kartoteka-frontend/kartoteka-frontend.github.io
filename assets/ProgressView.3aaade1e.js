import{_ as h,T as l}from"./index.31fc017f.js";import{h as p,o as a,c as n,F as m,b as u,a as r,t as s}from"./vendor.db9d2b8c.js";const _={name:"ProgressView",components:{Table:l},data(){return{documents:[],progresses:[],group_name:"",document_name:"",document_author:"",date_from:"",date_to:"",header:{progress:{label:"Postup (%)",width:10,align:"center",noFilter:!0},name:{label:"N\xE1zov",width:20},author:{label:"Autor",width:20},description:{label:"Popis",width:50}},progressHeader:{progress:{label:"Postup (%)",width:10,align:"center",noFilter:!0},name:{label:"Meno",width:45},email:{label:"Email",width:45}}}},computed:{id(){return this.$route.params.id}},methods:{async getDocumentsProgress(){try{const i=(await this.$api.getDocumentsProgress()).data.map(o=>({progress:o.state,name:o.document_id.name,description:o.document_id.description,author:o.document_id.author,_id:o.document_id._id}));this.documents=i}catch(e){console.log(e)}},async getAssignmentProgress(){try{const e=await this.$api.getAssignmentProgress(this.id);e.data&&(this.group_name=e.data.group,this.document_name=e.data.document.name,this.document_author=e.data.document.author,this.date_from=new Date(e.data.date_from).toISOString().slice(0,10),this.date_to=new Date(e.data.date_to).toISOString().slice(0,10),this.progresses=e.data.members)}catch(e){console.log(e)}},openDocument(e){this.$router.push({name:"documentId",params:{id:e}})}},watch:{id:{handler:async function(e){e&&this.$route.name=="progressId"?this.getAssignmentProgress():(this.progresses=[],this.group_name="",this.document_name="",this.document_author="",this.date_from="",this.date_to="")},immediate:!0}},created(){this.getDocumentsProgress()}},g={class:"progress main"},f=r("h1",null,"Postup",-1);function w(e,i,o,b,t,d){const c=p("Table");return a(),n("div",g,[d.id?(a(),n(m,{key:1},[r("h1",null,s(t.group_name),1),r("h2",null,s(t.document_name)+" - "+s(t.document_author),1),r("h4",null,"Od: "+s(t.date_from)+" | Do: "+s(t.date_to),1),u(c,{header:t.progressHeader,data:t.progresses,onClick:()=>{}},null,8,["header","data","onClick"])],64)):(a(),n(m,{key:0},[f,u(c,{header:t.header,data:t.documents,onClick:d.openDocument},null,8,["header","data","onClick"])],64))])}var k=h(_,[["render",w]]);export{k as default};
